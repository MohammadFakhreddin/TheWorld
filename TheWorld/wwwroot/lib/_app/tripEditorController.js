!function(){"use strict";function t(t){if(t&&t.length>0){for(var o=[],n=0;n<t.length;n++)o.push({lat:t[n].latitude,long:t[n].longtitude,info:t.name||"undefined"});travelMap.createMap({stops:o,selector:"#map",currentStop:1,initialZoom:3})}}angular.module("app-trips").controller("tripEditorController",function(o,n){var e=this;e.tripName=n.tripName,e.stops=[],e.errorMessage="",e.isBusy=!0,e.newStop={};var s="/api/trips/"+e.tripName+"/stops";o.get(s).then(function(o){angular.copy(o.data,e.stops),t(e.stops)},function(t){e.errorMessage=t.errorMessage.toString()}).finally(function(){e.isBusy=!1}),e.addStop=function(){e.isBusy=!0,o.post(s,e.newStop).then(function(o){e.stops.push(o.data),t(e.stops),e.newStop={}},function(t){e.errorMessage="Failed to add new stop"}).finally(function(){e.isBusy=!1})}})}();